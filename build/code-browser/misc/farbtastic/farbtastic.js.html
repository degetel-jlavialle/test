<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>
            Mayflower Code Browser - Source Code
        </title>
        <link rel="stylesheet" type="text/css" href="../js/jquery.sidebar/css/codebrowser/sidebar.css" />
        <link rel="stylesheet" type="text/css" href="../css/global.css" />
        <link rel="stylesheet" type="text/css" href="../css/cruisecontrol.css" />
        <link rel="stylesheet" type="text/css" href="../css/review.css" />

        <script type="text/javascript" src="../js/jquery-1.4.2.min.js"></script>
        <script type="text/javascript" src="../js/jquery.sidebar/jquery-ui-1.7.2.custom.min.js"></script>
        <script type="text/javascript" src="../js/jquery.sidebar/jquery.sidebar.js"></script>
        <script type="text/javascript" src="../js/jquery.cluetip/lib/jquery.hoverIntent.js"></script>
        <script type="text/javascript" src="../js/jquery.cluetip/lib/jquery.bgiframe.min.js"></script>
        <script type="text/javascript" src="../js/jquery.cluetip/jquery.cluetip.min.js"></script>

        <script type="text/javascript" src="../js/review.js"></script>
    </head>
    <body class="codebrowser">
        <div class="header">
            <a href="./../index.html">Go back to index</a> |
            <a href="http://github.com/mayflowergmbh/PHP_CodeBrowser">PHP CodeBrowser</a>
        </div>
        <hr/>
        <div id="review">
            <div class="filepath">
                misc/farbtastic/farbtastic.js            </div>

            <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div class="code"><ol class="code"><li id="line_1" class="odd"><span class="lineNumber">1&nbsp;</span>(function(e){e.fn.farbtastic=function(f){e.farbtastic(this,f);return&nbsp;this};e.farbtastic=function(f,l){f=e(f).get(0);return&nbsp;f.farbtastic||(f.farbtastic=new&nbsp;e._farbtastic(f,l))};e._farbtastic=function(f,l){var&nbsp;a=this;e(f).html('&lt;div&nbsp;class="farbtastic"&gt;&lt;div&nbsp;class="color"&gt;&lt;/div&gt;&lt;div&nbsp;class="wheel"&gt;&lt;/div&gt;&lt;div&nbsp;class="overlay"&gt;&lt;/div&gt;&lt;div&nbsp;class="h-marker&nbsp;marker"&gt;&lt;/div&gt;&lt;div&nbsp;class="sl-marker&nbsp;marker"&gt;&lt;/div&gt;&lt;/div&gt;');var&nbsp;k=e(".farbtastic",f);a.wheel=e(".wheel",f).get(0);a.radius=84;a.square=100;a.width=194;navigator.appVersion.match(/MSIE&nbsp;[0-6]\./)&amp;&amp;<a name="line_1"></a></li>
<li id="line_2" class="even"><span class="lineNumber">2&nbsp;</span>e("*",k).each(function(){if(this.currentStyle.backgroundImage!="none"){var&nbsp;b=this.currentStyle.backgroundImage;b=this.currentStyle.backgroundImage.substring(5,b.length-2);e(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,&nbsp;sizingMethod=crop,&nbsp;src='"+b+"')"})}});a.linkTo=function(b){typeof&nbsp;a.callback=="object"&amp;&amp;e(a.callback).unbind("keyup",a.updateValue);a.color=null;if(typeof&nbsp;b=="function")a.callback=b;else&nbsp;if(typeof&nbsp;b=="object"||typeof&nbsp;b=="string"){a.callback=<a name="line_2"></a></li>
<li id="line_3" class="odd"><span class="lineNumber">3&nbsp;</span>e(b);a.callback.bind("keyup",a.updateValue);a.callback.get(0).value&amp;&amp;a.setColor(a.callback.get(0).value)}return&nbsp;this};a.updateValue=function(){this.value&amp;&amp;this.value!=a.color&amp;&amp;a.setColor(this.value)};a.setColor=function(b){var&nbsp;c=a.unpack(b);if(a.color!=b&amp;&amp;c){a.color=b;a.rgb=c;a.hsl=a.RGBToHSL(a.rgb);a.updateDisplay()}return&nbsp;this};a.setHSL=function(b){a.hsl=b;a.rgb=a.HSLToRGB(b);a.color=a.pack(a.rgb);a.updateDisplay();return&nbsp;this};a.widgetCoords=function(b){var&nbsp;c=e(a.wheel).offset();return{x:b.pageX-<a name="line_3"></a></li>
<li id="line_4" class="even"><span class="lineNumber">4&nbsp;</span>c.left-a.width/2,y:b.pageY-c.top-a.width/2}};a.mousedown=function(b){if(!document.dragging){e(document).bind("mousemove",a.mousemove).bind("mouseup",a.mouseup);document.dragging=true}var&nbsp;c=a.widgetCoords(b);a.circleDrag=Math.max(Math.abs(c.x),Math.abs(c.y))*2&gt;a.square;a.mousemove(b);return&nbsp;false};a.mousemove=function(b){var&nbsp;c=a.widgetCoords(b);if(a.circleDrag){b=Math.atan2(c.x,-c.y)/6.28;if(b&lt;0)b+=1;a.setHSL([b,a.hsl[1],a.hsl[2]])}else{b=Math.max(0,Math.min(1,-(c.x/a.square)+0.5));c=Math.max(0,Math.min(1,<a name="line_4"></a></li>
<li id="line_5" class="odd"><span class="lineNumber">5&nbsp;</span>-(c.y/a.square)+0.5));a.setHSL([a.hsl[0],b,c])}return&nbsp;false};a.mouseup=function(){e(document).unbind("mousemove",a.mousemove);e(document).unbind("mouseup",a.mouseup);document.dragging=false};a.updateDisplay=function(){var&nbsp;b=a.hsl[0]*6.28;e(".h-marker",k).css({left:Math.round(Math.sin(b)*a.radius+a.width/2)+"px",top:Math.round(-Math.cos(b)*a.radius+a.width/2)+"px"});e(".sl-marker",k).css({left:Math.round(a.square*(0.5-a.hsl[1])+a.width/2)+"px",top:Math.round(a.square*(0.5-a.hsl[2])+a.width/2)+"px"});<a name="line_5"></a></li>
<li id="line_6" class="even"><span class="lineNumber">6&nbsp;</span>e(".color",k).css("backgroundColor",a.pack(a.HSLToRGB([a.hsl[0],1,0.5])));if(typeof&nbsp;a.callback=="object"){e(a.callback).css({backgroundColor:a.color,color:a.hsl[2]&gt;0.5?"#000":"#fff"});e(a.callback).each(function(){if(this.value&amp;&amp;this.value!=a.color)this.value=a.color})}else&nbsp;typeof&nbsp;a.callback=="function"&amp;&amp;a.callback.call(a,a.color)};a.pack=function(b){var&nbsp;c=Math.round(b[0]*255),d=Math.round(b[1]*255);b=Math.round(b[2]*255);return"#"+(c&lt;16?"0":"")+c.toString(16)+(d&lt;16?"0":"")+d.toString(16)+(b&lt;16?"0":<a name="line_6"></a></li>
<li id="line_7" class="odd"><span class="lineNumber">7&nbsp;</span>"")+b.toString(16)};a.unpack=function(b){if(b.length==7)return[parseInt("0x"+b.substring(1,3))/255,parseInt("0x"+b.substring(3,5))/255,parseInt("0x"+b.substring(5,7))/255];else&nbsp;if(b.length==4)return[parseInt("0x"+b.substring(1,2))/15,parseInt("0x"+b.substring(2,3))/15,parseInt("0x"+b.substring(3,4))/15]};a.HSLToRGB=function(b){var&nbsp;c,d=b[0];c=b[1];b=b[2];c=b&lt;=0.5?b*(c+1):b+c-b*c;b=b*2-c;return[this.hueToRGB(b,c,d+0.33333),this.hueToRGB(b,c,d),this.hueToRGB(b,c,d-0.33333)]};a.hueToRGB=function(b,c,<a name="line_7"></a></li>
<li id="line_8" class="even"><span class="lineNumber">8&nbsp;</span>d){d=d&lt;0?d+1:d&gt;1?d-1:d;if(d*6&lt;1)return&nbsp;b+(c-b)*d*6;if(d*2&lt;1)return&nbsp;c;if(d*3&lt;2)return&nbsp;b+(c-b)*(0.66666-d)*6;return&nbsp;b};a.RGBToHSL=function(b){var&nbsp;c,d,m,g,h=b[0],i=b[1],j=b[2];c=Math.min(h,Math.min(i,j));b=Math.max(h,Math.max(i,j));d=b-c;g=(c+b)/2;m=0;if(g&gt;0&amp;&amp;g&lt;1)m=d/(g&lt;0.5?2*g:2-2*g);c=0;if(d&gt;0){if(b==h&amp;&amp;b!=i)c+=(i-j)/d;if(b==i&amp;&amp;b!=j)c+=2+(j-h)/d;if(b==j&amp;&amp;b!=h)c+=4+(h-i)/d;c/=6}return[c,m,g]};e("*",k).mousedown(a.mousedown);a.setColor("#000000");l&amp;&amp;a.linkTo(l)}})(jQuery);<a name="line_8"></a></li></ol></div></body></html>
                    </div>
    </body>
</html>
